<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>&lt;css-doodle /&gt;</title>
  <meta name="keywords" content="css, web components">
  <meta name="description" content="A web component for drawing patterns with CSS">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="lib/codemirror/style.css">
  <link rel="stylesheet" href="style.css?e34c5ce67318483f1d5b98a4f198c4c3">
  <script>(window.customElements && document.head.attachShadow) || (document.querySelector('html').className += ' oldie')</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/css-doodle/0.7.1/css-doodle.min.js"></script>
</head>
<body>

  <div class="cover">
    <css-doodle use="var(--flags)"></css-doodle>
    <header>
      <h1>&lt; <em>css-doodle</em> /&gt; </h1>
      <p>A web component for drawing patterns with CSS</p>
      <nav>
        <a href="#usage">Usage â†“</a>
        <a href="https://codepen.io/collection/XyVkpQ/">CodePen</a>
        <a href="https://github.com/css-doodle/css-doodle">GitHub</a>
      </nav>
    </header>
    <div class="wrap">
      <div class="playground">
        <div class="doodle" front><!-- insert dynamicly --></div>
        <div class="source"><!--insert dynamicly --></div>
        </div>
      </div>
    </div>
  </div>

  <div class="docs">

    <!-- intro -->
    <section class="intro wrap">
      <h2><a name="intro"></a>Introduction</h2>
      <p>
        <em>&lt;css-doodle /&gt; </em> is based on
        <a href="http://w3c.github.io/webcomponents/spec/shadow/">Shadow DOM v1</a> and
        <a href="https://html.spec.whatwg.org/multipage/scripting.html#custom-elements">Custom Elements v1</a>.
        You can use it on latest <em>Chrome</em>, <em>Safari</em> and <em>Firefox</em> right now without polyfills.
      </p>
      <p>
        The component will generate a grid of divs by the rules (plain CSS) inside it.
        You can easily manipulate those cells using CSS to come up with a graphic pattern or an animated graph.
        The limit is the limit of CSS itself.
      </p>
    </section>

    <!-- getting started -->
    <section class="gettting-started wrap">
      <h2><a name="getting-started"></a>Getting Started</h2>
      <p>
        Include the script directly from <a href="https://cdnjs.com/libraries/css-doodle">cdnjs</a> and everything is ready:
      </p>
      <p class="first-code-sample">
        <textarea code>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/css-doodle/0.7.1/css-doodle.min.js"></script>

          <css-doodle>
            /* put your code here */
          </css-doodle>
        </textarea>
      </p>
      <p>If cdnjs is not ready, just use:</p>
      <p>
        <textarea code>
          <script src="https://unpkg.com/css-doodle@0.7.1/css-doodle.min.js"></script>
        </textarea>
      </p>
      <p>You can also install it from <a href="http://npmjs.org/package/css-doodle">npm</a> and import the module in JavaScript:
      <p>
        <textarea code>
          npm install css-doodle

          /* import it */
          import 'css-doodle';
        </textarea>
      </p>
    </section>

    <!-- usage -->
    <section class="usage">
      <div class="wrap">
        <h2><a name="usage"></a>Usage</h2>
        <p>
          The syntax of <em>&lt;css-doodle /&gt;</em> is based on CSS and provides several extra utility
          functions and shorthand properties.
        </p>

        <ul class="nav">
          <li> <a href="#grid">Grid</a></li>
          <li>
            <a href="#selectors">Selectors</a>
            <ul>
              <li> <a href="#selector-:doodle">:doodle</a></li>
              <li> <a href="#selector-:container">:container</a></li>
              <li> <a href="#selector-@nth">@nth</a></li>
              <li> <a href="#selector-@even">@even</a></li>
              <li> <a href="#selector-@odd">@odd</a></li>
              <li> <a href="#selector-@at">@at</a></li>
              <li> <a href="#selector-@random">@random</a></li>
              <li> <a href="#selector-@row">@row</a></li>
              <li> <a href="#selector-@col">@col</a></li>
            </ul>
          </li>
          <li>
            <a href="#properties">Properties</a>
            <ul>
              <li> <a href="#property-@grid">@grid</a></li>
              <li> <a href="#property-@use">@use</a></li>
              <li> <a href="#property-@size">@size</a></li>
              <li> <a href="#property-@size">@min-size</a></li>
              <li> <a href="#property-@size">@max-size</a></li>
              <li> <a href="#property-@place-cell">@place-cell</a></li>
              <li> <a href="#property-@shape">@shape</a></li>
            </ul>
          </li>
          <li>
            <a href="#functions">Functions</a>
            <ul>
              <li> <a href="#function-@index">@index</a></li>
              <li> <a href="#function-@row">@row</a></li>
              <li> <a href="#function-@col">@col</a></li>
              <li> <a href="#function-@size-row">@size-row</a></li>
              <li> <a href="#function-@size-col">@size-col</a></li>
              <li> <a href="#function-@size">@size</a></li>
              <li> <a href="#function-@pick">@pick</a></li>
              <li> <a href="#function-@pick-n">@pick-n</a></li>
              <li> <a href="#function-@pick-d">@pick-d</a></li>
              <li> <a href="#function-@rand">@rand</a></li>
              <li> <a href="#function-@last">@last-pick</a></li>
              <li> <a href="#function-@last">@last-rand</a></li>
              <li> <a href="#function-@repeat">@repeat</a></li>
              <li> <a href="#function-@multiple">@multiple</a></li>
              <li> <a href="#function-@n">@n</a></li>
              <li> <a href="#function-@svg">@svg</a></li>
              <li> <a href="#function-@Math">@&lt;Math&gt;</a></li>
              <li> <a href="#function-@calc">@calc</a></li>
              <li> <a href="#function-@var">@var</a></li>
              <li> <a href="#function-@hex">@hex</a></li>
            </ul>
          </li>
          <li>
            <a href="#js-api">JS API</a>
            <ul>
              <li> <a href="#js-api-grid">grid</a></li>
               <li> <a href="#js-api-use">use</a></li>
              <li> <a href="#js-api-update">update</a></li>
            </ul>
          </li>
        </ul>
      </div>

      <!-- example -->
      <section class="example">
        <div class="container">
          <css-doodle>
            :doodle {
              @grid: 18 / 100vmax;
              background: #0a0c27;
            }
            --hue: calc(180 + 1.5 * @row() * @col());
            background: hsl(var(--hue), 50%, 70%);
            margin: -.5px;
            transition: @r(.5s) ease;
            clip-path: polygon(@pick(
              '0 0, 100% 0, 100% 100%',
              '0 0, 100% 0, 0 100%',
              '0 0, 100% 100%, 0 100%',
              '100% 0, 100% 100%, 0 100%'
            ));
          </css-doodle>
        </div>
        <textarea code></textarea>
      </section>

      <article class="wrap">
        <h3><a name="grid"></a>Grid</h3>

        <p>
          The number of rows and columns in the grid is defined by the <code>grid</code> attribute on the element,
          ranged from <em>1</em> to <em>32</em>. It's default to be <em>1x1</em> when no value or 0 is given.
        </p>

        <p class="has-preview">
          <textarea code>
            <css-doodle grid="5">
              :doodle {
                grid-gap: 1px;
                width: 8em; height: 8em;
              }
              background: #60569e;
            </css-doodle>
          </textarea>
          <css-doodle grid="5">
            :doodle {
              grid-gap: 1px;
              @size: 8em;
            }
            background: #60569e;
          </css-doodle>
        </p>

        <p>The row or column is limited up to <em>1024</em> only when the grid is 1-dimensional: </p>
        <p class="has-preview">
          <textarea code>
            <css-doodle grid="35x1">
              :doodle {
                grid-row-gap: 1px;
                @size: 8em; /* width: 8em; height: 8em; */
              }
              background: #60569e;
              width: @rand(5%, 100%); /* from 5% to 100% by random */
            </css-doodle>
          </textarea>
          <css-doodle grid="35x1" class="click-to-update">
            :doodle {
              grid-row-gap: 1px;
              @size: 8em 12em;
            }
            transition: .2s ease @rand(500ms);
            background: #60569e;
            will-change: width;
            width: @rand(5%, 100%);
          </css-doodle>
        </p>

        <p>
           The following formats of <code>grid</code> value are recognizable:
        </p>
        <div class="list-items">
          <ul>
            <li><code>grid = "0"</code></li>
            <li><code>grid = "5"</code></li>
            <li><code>grid = "20"</code></li>
            <li><code>grid = "5x7"</code></li>
            <li><code>grid = "5 x 7"</code></li>
            <li><code>grid = "5,7"</code></li>
          </ul>
        </div>

        <p>
          There's an alternative way to set up the <code>grid</code> by using the <a href="#property-@grid">@grid</a> property.
        </p>
        <p class="has-preview">
          <textarea code>
            <css-doodle>
              :doodle {
                @grid: 5 / 8em;
              }
              background: #60569e;
              transform: scale(@rand(.2, .9));
            </css-doodle>
          </textarea>
          <css-doodle grid="5" class="click-to-update">
            :doodle {
              @grid: 5;
              @size: 8em;
            }
            background: #60569e;
            transform: scale(@r(.2, .9));
          </css-doodle>
        </p>
        <div class="sep"></div>
      </article>

      <article class="wrap">
        <h3><a name="selectors"></a>Selectors</h3>

        <section>
          <h4><a name="selector-:doodle"></a>:doodle</h4>
          <p>
            The <code>:doodle</code>
            is a special selector indicates to the component element itself.
            Note that the styles would be over-written by your normal css files outside.
            <span class="tip">(try to hover on the doodle)</span>
          </p>
          <p class="has-preview">
            <textarea code>
              :doodle { --s: 0 }
              :doodle(:hover) { --s: 1 }

              transition: .5s cubic-bezier(.175, .885, .32, 1.275);
              transition-delay: @rand(500ms);
              transform: translateY(calc(var(--s) * 100%));
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @grid: 5 / 8em;
                --s: 0;
                grid-gap: 1px;
              }
              :doodle(:hover) {
                --s: 1;
              }
              --offset: calc(var(--s) * 100%);
              transform: translateY(var(--offset));
              will-change: transform;
              transition: .5s cubic-bezier(.175, .885, .32, 1.275);
              transition-delay: @rand(500ms);

              transform-origin: 50% 50%;
              background: #60569e;
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="selector-:container"></a>:container</h4>
          <p>
            The <code>:container</code>
            is the container element that holds all the cells. It's styled using Grid Layout.
            And you may want to set <code>grid-gap</code> inside it.
          </p>
          <p class="has-preview">
            <textarea code>
              :doodle {
                overflow: hidden;
              }
              :container {
                grid-gap: 1px;
                transform: rotate(45deg) scale(1.5);
              }
            </textarea>
            <css-doodle>
              :doodle {
                @grid: 8 / 8em;
                overflow: hidden;
              }
              :container {
                grid-gap: 1px;
                transform: rotate(45deg) scale(1.5);
              }
              background: #60569e;
            </css-doodle>
          </p>
          <p>
            It inherits all the grid properties from <code>:doodle</code> so it's why this also works:
          </p>
          <p class="no-preview">
            <textarea code>
              :doodle {
                grid-gap: 1px;
              }
            </textarea>
          </p>
        </section>

        <section>
          <h4><a name="selector-@nth"></a>@nth(n, ...)</h4>
          <p> Select the nth cell like <code> :nth-child(n)</code>.</p>
          <p class="has-preview">
            <textarea code>
              @nth(5) {
                background: #60569e;
              }
              @nth(3n + 8) {
                background: #e6437d;
              }
              @nth(5, 3n + 8) {
                :after {
                  content: @index();
                  font-size: .8em;
                  color: #fff;
                }
              }
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @size: 8em;
              }
              background: #f5f5f5;
              margin: .5px;
              @nth(5) {
                background: #60569e;
              }
              @nth(3n + 8) {
                background: #e6437d;
              }
              @nth(5, 3n + 8) {
                :after {
                  content: @index();
                  font-size: .8em;
                  color: #fff;
                }
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="selector-@even"></a>@even</h4>
          <p> Select cells like <code> :nth-child(even)</code> but shorter.</p>
          <p class="has-preview">
            <textarea code>
              @even {
                background: #60569e;
              }
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @size: 8em;
              }
              @even {
                background: #60569e;
                :after {
                  content: @index();
                  font-size: .8em;
                  color: #fff;
                }
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="selector-@odd"></a>@odd</h4>
          <p> Select cells like <code> :nth-child(odd)</code>.</p>
          <p class="has-preview">
            <textarea code>
              @odd {
                background: #60569e;
              }
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @size: 8em;
              }
              @odd {
                background: #60569e;
                :after {
                  content: @index();
                  font-size: .8em;
                  color: #fff;
                }
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="selector-@at"></a>@at(row, col)</h4>
          <p>Select cell at specific row and column.</p>
          <p class="has-preview">
            <textarea code>
              @at(4, 2) {
                background: #60569e;
              }
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @size: 8em;
              }
              background: #f5f5f5;
              margin: .5px;
              @at(4, 2) {
                background: #60569e;
                :after {
                  content: @row(), @col();
                  font-size: .5em;
                  color: #fff;
                }
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="selector-@random"></a>@random([ ratio ])</h4>
          <p>Select cells randomly. The <code>ratio</code> accepts value between <code>0</code> and <code>1</code>. Defaults to <code>0.5</code>.</p>
          <p class="has-preview">
            <textarea code>
              @random {
                background: #60569e;
              }
            </textarea>
            <css-doodle grid="5" class="click-to-update">
              :doodle {
                @size: 8em;
              }
              background: #f5f5f5;
              transition: .2s;
              @random {
                background: #60569e;
                :after {
                  content: @index();
                  font-size: .8em;
                  color: #fff;
                }
              }
              margin: .5px;
            </css-doodle>
          </p>
          <p>The selector can be applied multiple times.</p>
          <p class="has-preview">
            <textarea code>
              @random { border-top: 1px solid #60569e; }
              @random { border-left: 1px solid #60569e; }
              @random(.2) {
                :after {
                  content: '';
                  background: hsl(@rand(360), 60%, 70%);
                  @size: @rand(3px);
                }
              }
            </textarea>
            <css-doodle class="click-to-update">
              :doodle {
                @grid: 16 / 8em;
                overflow: hidden;
              }
              margin: -.5px;
              @random {
                border-top: 1px solid #60569e;
              }
              @random {
                border-left: 1px solid #60569e;
              }
              @random(.2) {
                :after {
                  content: '';
                  background: hsl(@rand(360), 60%, 70%);
                  @size: @rand(3px);
                }
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="selector-@row"></a>@row(n, ...)</h4>
          <p> Select the nth row of the grid.</p>
          <p class="has-preview">
            <textarea code>
              @row(3) {
                background: #60569e;
              }
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @size: 8em;
              }
              background: #f5f5f5;
              margin: .5px;
              @row(3) {
                background: #60569e;
                :after {
                  content: @row();
                  font-size: .8em;
                  color: #fff;
                }
              }
            </css-doodle>
          </p>
          <p>
            The <code>odd</code> and <code>even</code> is supported.
          </p>
          <p class="has-preview">
            <textarea code>
              @row(even) {
                background: #60569e;
              }
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @size: 8em;
              }
              background: #f5f5f5;
              margin: .5px;
              @row(even) {
                background: #60569e;
                :after {
                  content: @row();
                  font-size: .8em;
                  color: #fff;
                }
              }
              @row(even) {
                :after {
                  content: @row();
                  font-size: .8em;
                  color: #fff;
                }
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="selector-@col"></a>@col(n, ...)</h4>
          <p> Select the nth column of the grid.</p>
          <p class="has-preview">
            <textarea code>
              @col(3) {
                background: #60569e;
              }
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @size: 8em;
              }
              background: #f5f5f5;
              margin: .5px;
              @col(3) {
                background: #60569e;
                :after {
                  content: @col();
                  font-size: .8em;
                  color: #fff;
                }
              }
            </css-doodle>
          </p>
          <p>
            You can use <code>odd</code> and <code>even</code> too.
          </p>
          <p class="has-preview">
            <textarea code>
              @col(odd) {
                background: #60569e;
              }
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @size: 8em;
              }
              background: #f5f5f5;
              margin: .5px;
              @col(odd) {
                background: #60569e;
                :after {
                  content: @col();
                  font-size: .8em;
                  color: #fff;
                }
              }
            </css-doodle>
          </p>
        </section>
        <div class="sep"></div>
      </article>

      <article class="wrap">
        <h3><a name="properties"></a>Properties</h3>

        <section>
          <h4><a name="property-@grid"></a>@grid</h4>
          <p>Another way to set the <code>grid</code> attribute and the rule has higher priority.</p>
          <p class="has-preview">
            <textarea code>
              <css-doodle grid="5">
                :doodle {
                  @grid: 3x3;
                  @size: 8em;
                }
              </css-doodle>
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @grid: 3 / 8em;
              }
              background: #60569e;
              margin: .5px;
            </css-doodle>
          </p>

          <p>Set grid and doodle size at the same time: </p>
          <p class="has-preview">
            <textarea code>
              <css-doodle>
                :doodle {
                  @grid: 8 / 8em;
                }
              </css-doodle>
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @grid: 8 / 8em;
                grid-gap: 1px;
              }
              background: #60569e;
            </css-doodle>
          </p>
        </section>

         <section>
          <h4><a name="property-@use"></a>@use</h4>
          <p>Import styles from custom properties. It lets you write styles from normal css files.</p>
          <p class="no-preview">
            <textarea code>
              <style>
                :root {
                  --rule-a: (
                    :doodle { @grid: 5 / 8em; }
                    clip-path: circle(100% at 0 0);
                    background: #60569e;
                  );
                  --rule-b: (
                    background-image:radial-gradient(#fff 50%,transparent 50%);
                    background-position: -25% -25%;
                    background-size: @r(40%, 80%) @lr();
                    background-repeat: no-repeat;
                  );
                }
              </style>
            </textarea>
            <style>
              :root {
                --rule-a: (
                  :doodle { @grid: 5 / 8em; }
                  clip-path: circle(100% at 0 0);
                  background: #60569e;
                );
                --rule-b: (
                  background-image: radial-gradient(#fff 50%, transparent 50%);
                  background-position: -25% -25%;
                  background-size: @r(40%, 80%) @lr();
                  background-repeat: no-repeat;
                );
              }
            </style>
          </p>

          <p class="has-preview">
            <textarea code>
              <css-doodle>
                @use: var(--rule-a);
              </css-doodle>
            </textarea>
            <css-doodle>
              @use: var(--rule-a);
            </css-doodle>
          </p>

          <p>
            You can add multiple rules in a natural way:
          </p>
           <p class="has-preview">
            <textarea code>
              <css-doodle>
                @use: var(--rule-a), var(--rule-b);
                /* or */
                @use: var(--rule-a);
                @use: var(--rule-b);
              </css-doodle>
            </textarea>
            <css-doodle>
              @use: var(--rule-a), var(--rule-b);
            </css-doodle>
          </p>
          <p>Or define it in the <code>use</code> attribute on the element.
           <p class="no-preview">
            <textarea code>
              <css-doodle use="var(--my-rule)"></css-doodle>
            </textarea>
          </p>
        </section>

        <section>
          <h4><a name="property-@size"></a>@size, @min-size, @max-size</h4>
          <p>Set width and height in one place.</p>
          <p class="has-preview">
            <textarea code>
              @size: 10em;
              /* width: 10em; height: 10em; */

              @size: 4em 5em;
              /* width: 4em; height: 5em; */

              @min-size: 8em;
              /* min-width: 8em; min-height: 8em; */

              @max-size: 8em;
              /* max-width: 8em; max-height: 8em; */
            </textarea>
            <css-doodle>
              :doodle {
                @grid: 1 / 8em;
              }
              @size: 10em;
              @size: 4em 5em;
              @min-size: 8em;
              @max-size: 8em;
              background: #60569e;
              :after {
                content: 8em x 8em;
                color: #fff;
                font-size: .8em;
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="property-@place-cell"></a>@place-cell</h4>
          <p>Place cells relative to the grid. </p>
          <p class="has-preview">
            <textarea code>
              @size: 1.6em;
              @nth(1) { @place-cell: 0 top; }
              @nth(2) { @place-cell: right 25%; }
              @nth(3) { @place-cell: center; }
              @nth(4) { @place-cell: .8em calc(100% - .8em); }
              @nth(5) { @place-cell: 75% 80%; }
            </textarea>

            <css-doodle>
              :doodle {
                @grid: 1x5 / 8em;
                border: 1px solid #60569e;
              }
              @size: 1.6em;
              background: rgba(72, 74, 142, .8);
              @nth(1) { @place-cell: 0 top; }
              @nth(2) { @place-cell: right 25%; }
              @nth(3) { @place-cell: center; }
              @nth(4) { @place-cell: .8em calc(100% - .8em); }
              @nth(5) { @place-cell: 75% 80%; }
              :after {
                content: @index();
                color: #fff;
                font-size: .8em;
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="property-@shape"></a>@shape</h4>
          <p>Return a css shape which generated with <code>clip-path</code> and <code>polygon()</code>.</p>
          <p class="has-preview">
            <textarea code>
              :doodle {
                @grid: 7 / 8em;
                @shape: circle;
              }
              @even {
                @shape: hypocycloid 4;
                background: #60569e;
                transform: scale(2) rotate(-60deg);
              }
            </textarea>
            <css-doodle>
              :doodle {
                @grid: 7 / 8em;
                @shape: circle;
              }
              @even {
                @shape: hypocycloid 4;
                background: #60569e;
                transform: scale(2) rotate(-60deg);
              }
            </css-doodle>
          </p>
          <div class="basic-shapes">
            <h5><a name="basic-shape"></a>Basic shapes</h5>
            <div class="shapes">
              <!-- shapes -->
            </div>
          </div>
        </section>
      </article>

      <section class="example">
        <div class="container">
          <css-doodle>
            :doodle {
              @grid: 7 / 100vmax;
              background: #0a0c27;
            }
            @shape: clover 5;
            background: hsla(
              calc(360 - @i() * 4), 70%, 68%, @r(.8)
            );
            transform:
              scale(@r(.2, 1.5))
              translate(@m2(@r(-50%, 50%)));
          </css-doodle>
        </div>
        <textarea code></textarea>
      </section>

      <article class="wrap">
        <h3><a name="functions"></a>Functions</h3>
        <section>
          <h4><a name="function-@index"></a>@index</h4>
          <p> Returns the current index value of the cell.</p>
          <p class="has-preview">
            <textarea code>
              :after {
                content: @index();
                color: #fff;
              }
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @size: 8em;
              }
              background: #60569e;
              margin: .5px;
              :after {
                content: @index();
                color: #fff;
                font-size: .8em;
              }
            </css-doodle>
          </p>
          <p class="has-preview">
            <textarea code>
              :doodle {
                @grid: 5x1 / 8em;
              }
              @place-cell: center;
              @size: calc(100% / 5 * @index());
              opacity: calc(1.1 - 1 / 5 * @index());
              z-index: calc(5 - @index());
              background: #60569e;
            </textarea>
            <css-doodle grid="5">
              :doodle { @grid: 5x1 / 8em; }
              @place-cell: center;
              @size: calc(100% / @size() * @index());
              z-index: calc(@size() - @i());
              opacity: calc(1.1 - 1 / @size() * @index());
              background: #60569e;
              :after {
                content: @index();
                position: absolute;
                top: .2em; right: .2em;
                color: #fff;
                font-size: .6em;
              }
            </css-doodle>
          </p>
          <p class="alias">
            Alias: <code>@i</code>
          </p>
        </section>

        <section>
          <h4><a name="function-@row"></a>@row</h4>
          <p> Returns the current row number of the cell.</p>
          <p class="has-preview">
            <textarea code>
              :after {
                content: @row();
              }
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @size: 8em;
              }
              background: #60569e;
              margin: .5px;
              :after {
                content: @row();
                color: #fff;
                font-size: .8em;
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="function-@col"></a>@col</h4>
          <p> Returns the current column number of the cell.</p>
          <p class="has-preview">
            <textarea code>
              :after {
                content: @col();
              }
            </textarea>
            <css-doodle grid="5">
              :doodle { @size: 8em; }
              background: #60569e;
              margin: .5px;
              :after {
                content: @col();
                color: #fff;
                font-size: .8em;
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="function-@size-row"></a>@size-row</h4>
          <p> Returns the max row number of the grid.</p>
          <p class="has-preview">
            <textarea code>
              :doodle {
                @grid: 4x2 / 8em 9em;
              }
              :after {
                content: @row() / @size-row();
              }
            </textarea>
            <css-doodle>
              :doodle {
                @grid: 4x2 / 8em 9em;
              }
              background: #60569e;
              margin: .5px;
              :after {
                content: @row() / @size-row();
                color: #fff;
                font-size: .8em;
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="function-@size-col"></a>@size-col</h4>
          <p> Returns the max column number of the grid.</p>
          <p class="has-preview">
            <textarea code>
              :doodle {
                @grid: 2x4 / 8em 9em;
              }
              :after {
                content: @col() / @size-col();
              }
            </textarea>
            <css-doodle>
              :doodle {
                @grid: 2x4 / 8em 9em;
              }
              background: #60569e;
              margin: .5px;
              :after {
                content: @col()/@size-col();
                color: #fff;
                font-size: .8em;
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="function-@size"></a>@size</h4>
          <p> Returns the total cells number of the grid.</p>
          <p class="has-preview">
            <textarea code>
              :doodle {
                @grid: 3 / 8em;
              }
              :after {
                content: @index() / @size();
              }
            </textarea>
            <css-doodle>
              :doodle {
                @grid: 3 / 8em;
              }
              background: #60569e;
              margin: .5px;
              :after {
                content: @index() / @size();
                color: #fff;
                font-size: .8em;
              }
            </css-doodle>
          </p>
          <p>
            These numbers can be used to generate dynamic values together with <code>calc()</code>.
          </p>
          <p class="has-preview">
            <textarea code>
              background: rgba(
                96, 86, 158,
                calc(@row() * @col() / @size())
              );
            </textarea>
            <css-doodle grid="5">
              :doodle { @size: 8em; }
              --alpha: calc(@row() * @col() / @size());
              background: rgba(96, 86, 158, var(--alpha));
              :after {
                content: @calc(@row() * @col());
                color: #fff;
                font-size: .8em;
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="function-@pick"></a>@pick(v1, v2,...)</h4>
          <p>
            Randomly pick a value from the given list.
            <br/><span class="tip">(try to click on the doodle)</span>
          </p>
          <p class="has-preview">
            <textarea code>
              opacity: @pick(1, .6, .3, .1);
              :after {
                content: @pick(1, 2, 3, 4);
              }
            </textarea>
            <css-doodle grid="5" class="click-to-update">
              :doodle { @size: 8em; }
              opacity: @pick(1, .6, .3, .1);
              background: #60569e;
              :after {
                content: @pick(1, 2, 3, 4);
                color: #fff;
                font-size: .8em;
              }
            </css-doodle>
          </p>
          <p>
            It supports range format like this: <code>[0-9a-z]</code>
          </p>
          <p class="has-preview">
            <textarea code>
              opacity: @pick(1, .6, .3, .1);
              :after {
                content: @pick([a-z]);
              }
            </textarea>
            <css-doodle grid="5" class="click-to-update">
              :doodle { @size: 8em; }
              opacity: @pick(1, .6, .3, .1);
              background: #60569e;
              :after {
                content: @pick([a-z]);
                color: #fff;
                font-size: .8em;
              }
            </css-doodle>
          </p>
          <p class="alias">
            Alias: <code>@p</code>
          </p>
        </section>

        <section>
          <h4><a name="function-@pick-n"></a>@pick-n(v1, v2,...)</h4>
          <p>
            Pick a value from the given list one by one.
          </p>
          <p class="has-preview">
            <textarea code>
              opacity: @pick-n(1, .6, .3, .1);
              :after {
                content: @pick-n([1-4]);
              }
            </textarea>
            <css-doodle grid="5">
              :doodle { @size: 8em; }
              opacity: @pick-n(1, .6, .3, .1);
              background: #60569e;
              :after {
                content: @pick-n([1-4]);
                color: #fff;
                font-size: .8em;
              }
            </css-doodle>
          </p>
          <p class="alias">
            Alias: <code>@pn</code>
          </p>
        </section>
        <section>
          <h4><a name="function-@pick-d"></a>@pick-d(v1, v2,...)</h4>
          <p>
            Pick a value like <code>@pick-n()</code>, but with distinct random order.
          </p>
          <p class="has-preview">
            <textarea code>
              opacity: @pick-d(1, .6, .3, .1);
              :after {
                content: @pick-d([a-z]);
              }
            </textarea>
            <css-doodle class="click-to-update" grid="5">
              :doodle { @size: 8em; }
              opacity: @pick-d(1, .6, .3, .1);
              background: #60569e;
              :after {
                content: @pick-d([a-z]);
                color: #fff;
                font-size: .8em;
              }
            </css-doodle>
          </p>
          <p class="alias">
            Alias: <code>@pd</code>
          </p>
        </section>

        <section>
          <h4><a name="function-@rand"></a>@rand(start [,end])</h4>
          <p>
            Returns a random value between two numbers.
            <br/><span class="tip">(try to click the doodle)</span>
          </p>
          <p class="has-preview">
            <textarea code>
              background: rgba(96, 86, 158, @rand(.9));
              transition: .2s ease @rand(200ms);
              transform: rotate(@rand(360deg));
              clip-path: polygon(
                @rand(100%) 0, 100% @rand(100%), 0 @rand(100%)
              );
            </textarea>
            <css-doodle grid="5" class="click-to-update">
              :doodle { @size: 8em; }
              background: rgba(96, 86, 158, @rand(.9));
              transition: .2s ease @rand(200ms);
              will-change: transform;
              transform: rotate(@rand(360deg));
              clip-path: polygon(
                @rand(100%) 0, 100% @rand(100%), 0 @rand(100%)
              );
            </css-doodle>
          </p>
          <p>It also recognizes the letter range: </p>
          <p class="has-preview">
            <textarea code>
              :after {
                content: @rand(a, z);
                font-size: @rand(.4em, 1.2em);
              }
            </textarea>
            <css-doodle grid="5" class="click-to-update">
              :doodle { @size: 8em; }
              background: #60569e;
              margin: .5px;
              :after {
                font-size: @rand(.4em, 1.2em);
                content: @rand(a, z);
                color: #fff;
              }
            </css-doodle>
          </p>
          <p class="alias">
            Alias: <code>@r</code>
          </p>
        </section>

        <section>
          <h4><a name="function-@last"></a>@last-pick, @last-rand</h4>
          <p>
            Returns the last value of <code>@pick</code>, <code>@pick-n</code>, <code>@pick-d</code> and <code>@rand</code>.
          </p>
          <p class="has-preview">
            <textarea code>
              background: linear-gradient(
                @r(360deg),
                @pick(#60569e, #e6437d, #ebbf4d),
                rgba(255, 255, 255, 0),
                @last-pick()
              );
            </textarea>
            <css-doodle grid="5" class="click-to-update">
              :doodle { @size: 8em; }
              margin: .5px;
              background: linear-gradient(
                @r(360deg),
                @pick(#60569e, #e6437d, #ebbf4d),
                rgba(255, 255, 255, 0),
                @last-pick()
              );
            </css-doodle>
          </p>
          <p class="alias">
            Alias: <code>@lp</code> and <code>@lr</code>, respectively.
          </p>
        </section>

        <section>
          <h4><a name="function-@repeat"></a>@repeat(times, value)</h4>
          <p>
            Compose the given value multiple times.
            <br/><span class="tip">(try to click the doodle)</span>
          </p>
          <p class="has-preview">
            <textarea code>
              border-radius: @repeat(4, @rand(40%, 60%));

              /* dots */
              :after {
                background: #@repeat(6, @pick([0-9a-f]));
                /* ... */
              }
            </textarea>
            <css-doodle grid="5" class="click-to-update">
              :doodle { @size: 8em; }
              background: #60569e;
              margin: .5px;
              transition: .2s;
              border-radius: @repeat(4, @rand(40%, 60%));
              :after {
                content: '';
                position: absolute;
                transition: .2s;
                left: @rand(20%, 80%);
                top: @rand(20%, 80%);
                @size: 5px;
                border-radius: 50%;
                background: #@repeat(6, @p([0-9a-f]));
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="function-@multiple"></a>@multiple(times, value)</h4>
          <p>
            Same as <code>@repeat()</code>, but seperated with comma.
          </p>
          <p class="has-preview">
            <textarea code>
              background: linear-gradient(
                @rand(360deg),
                @multiple(3, (
                  @pick-n(#60569e, #e6437d, #ebbf4d)
                    calc((@n() - 1) * 100% / 3),
                  @lp()
                    calc(@n() * 100% / 3)
                ))
              );
            </textarea>
            <css-doodle grid="5" class="click-to-update">
              :doodle {
                @size: 8em;
              }
              margin: .5px;
              background: linear-gradient(
                @rand(360deg),
                @multiple(3, (
                  @pick-n(#60569e, #e6437d, #ebbf4d)
                    calc((@n() - 1) * 100% / 3),
                  @lp() calc(@n() * 100% / 3)
                ))
              );
            </css-doodle>
          </p>
          <p class="alias">
            Alias: <code>@m</code>
          </p>
        </section>

        <section>
          <h4><a name="function-@n"></a>@n()</h4>
          <p>
            Used only inside <code>@repeat</code> and <code>@multiple</code> functions to indicate the
            current repeating count.
          </p>
          <p class="has-preview">
            <textarea code>
              background: #60569e;
              margin: 20%;
              box-shadow: @m(5, (
                calc(@n() * 2px) calc(@n() * 2px) 0 0 #e6437d
              ));
            </textarea>
            <css-doodle grid="5">
              :doodle { @size: 8em; }
              background: #60569e;
              margin: 20%;
              box-shadow: @multiple(5, (
                calc(@n() * 2px) calc(@n() * 2px) 0 0 #e6437d
              ));
            </css-doodle>
          </p>

          <p>
            Since <code>0.6.2</code>, the number following the function name will be treated as the first
            parameter, so this will make the code much cleaner:
          </p>
          <textarea code>
            box-shadow: @m5(
              calc(@n() * 2px) calc(@n() * 2px) 0 0 #e6437d
            );
          </textarea>
        </section>

        <section>
          <h4><a name="function-@svg"></a>@svg(svg)</h4>
          <p>
            Use SVG directly as background image.
            The recommended way to use SVG is through with the <code>@use</code> property.
          </p>
          <p class="has-preview">
            <textarea code>
              <style>
                :root {
                  --svg-example: (
                    /* ... */
                    background-image: @svg(
                      <svg viewBox="0 0 100 175">
                        @repeat50(
                          <path
                            fill="none"
                            stroke-width="@r(.5)"
                            stroke="@p(#60569e, #e6437d)"
                            d="M0, 0 L@r(100), @r(175)"
                          />
                        )
                      </svg>
                    );
                  );
                }
              </style>

              <css-doodle use="var(--svg-example)"></css-doodle>
            </textarea>
            <style>
              :root {
                --svg-example: (
                :doodle {
                  @grid: 1 / 8em 14em;
                  background-size: 100%;
                  background-repeat: no-repeat;
                  background-image: @svg(
                    <svg viewBox="0 0 100 175">
                      @repeat50(<path
                        fill="none"
                        stroke-width="@r(.5)"
                        stroke="@pick(#60569e, #e6437d)"
                        d="M 0 0 L@r(100) @r(175)"
                      />)
                    </svg>
                  );
                }
              );
            </style>
            <css-doodle class="click-to-update" use="var(--svg-example)"></css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="function-@Math"></a>@&lt;Math&gt;</h4>
          <p>
            All Math functions and constants are available prefixed with <code>'@'</code>.
          </p>
          <p class="has-preview">
            <textarea code>
              --num: calc(
                @abs(@abs(@row() - 3) + @abs(@col() - 3) - 5) / 5
              );

              background: rgba(
                96, 86, 158, calc(var(--num) / 5)
              );
            </textarea>
            <css-doodle grid="5">
              :doodle { @size: 8em; }
              --num: @abs(@abs(@row() - 3) + @abs(@col() - 3) - 5);
              background: rgba(
                96, 86, 158, calc(var(--num) / 5)
              );
              will-change: transform;
              transform: rotate(15deg) scale(calc(var(--num) / 5));
            </css-doodle>
          </p>

          <p class="has-preview">
            <textarea code>
              :doodle {
                @grid: 60x1 / 8em 15em;
              }
              @size: 75.8% 1px;
              justify-self: center;
              background: #e6437d;
              opacity: calc(1 - @i() / @size());
              transform:
                rotate(-15deg)
                translateX(calc(@sin(@i() / 4) * @PI() * 10px));
            </textarea>
            <css-doodle>
              :doodle {
                @grid: 60x1 / 8em 15em;
              }
              @size: 75.8% 1px;
              justify-self: center;
              background: #60569e;
              opacity: calc(1 - @i() / @size());
              transform:
                rotate(-15deg)
                translateX(calc(@sin(@i() / 4) * @PI() * 10px));
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="function-@calc"></a>@calc(expr)</h4>
          <p>
            Evaluate calculations.
          </p>
          <p class="has-preview">
            <textarea code>
              :after {
                content: @calc(@i() * @i());
              }
            </textarea>
            <css-doodle>
              :doodle {
                @grid: 5 / 8em;
              }
              background: #60569e;
              :after {
                content: @calc(@i() * @i());
                color: #fff;
                font-size: .5em;
              }
              @odd {
                transform: scale(.75);
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="function-@var"></a>@var(expr)</h4>
          <p>
            Same as <code>var()</code>. Used to prevent the browser from evaluating the value inside nested vars.
          </p>
          <p class="has-preview">
            <textarea code>
              --bg: #60569e;
              background: linear-gradient(
                @rand(360deg),
                @var(--bg) 50%, transparent 50%
              );
            </textarea>
            <css-doodle class="click-to-update">
              :doodle {
                @grid: 5 / 8em;
              }
              --bg: #60569e;
              background: linear-gradient(
                @r(360deg),
                @var(--bg) 50%, transparent 50%
              );
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="function-@hex"></a>@hex(num)</h4>
          <p>
            Transform a number to the hex format.
          </p>
          <p class="has-preview">
            <textarea code>
              :after {
                content: \@hex(@rand(9632, 9687));
              }
            </textarea>
            <css-doodle grid="5" class="click-to-update">
              :doodle { @size: 8em; }
              margin: .5px;
              :after {
                content: \@hex(@rand(9632, 9687));
                color: #60569e;
              }
            </css-doodle>
          </p>
        </section>
      </article>

      <section class="example">
        <div class="container">
          <css-doodle>
            :doodle {
              @grid: 20 / 100vmax;
              background: #0a0c27;
              font-family: sans-serif;
            }
            :after {
              content: \@hex(@r(0x2500, 0x257f));
              color: hsla(@r(360), 70%, 70%, @r(.9));
              font-size: 5vmax;
            }
          </css-doodle>
        </div>
        <textarea code></textarea>
      </section>

      <article class="wrap">
        <h3><a name="js-api"></a>JS API </h3>
        <section>
          <h4><a name="js-api-grid"></a>grid</h4>
          <p>Getter/setter for the <code>grid</code> attribute on the element. </p>
          <p>
            <textarea code>
              const doodle = document.querySelector('css-doodle');

              /* Note that the grid value inside the :doodle selector has higher
                 priority than the attribute value on the element. So this setter
                 operation may not have an affect on the final grid value. */
              doodle.grid = "5";

              console.log(doodle.grid);
              /* { x: 5, y: 5, size: 25 } */
            </textarea>
          </p>
        </section>
         <section>
          <h4><a name="js-api-use"></a>use</h4>
          <p>Getter/setter for the <code>use</code> attribute on the element. </p>
          <p>
            <textarea code>
              const doodle = document.querySelector('css-doodle');
              doodle.use = 'var(--my-rule)';

              console.log(doodle.use);
              /* var(--my-rule) */
            </textarea>
          </p>
        </section>
        <section>
          <h4><a name="js-api-update"></a>update([styles])</h4>
          <p>Re-render the component (with given styles).</p>
          <p>
            <textarea code>
              const doodle = document.querySelector('css-doodle');

              /* update styles and refresh */
              doodle.update(`
                :doodle { @grid: 6 / 8em }
                background: rebeccapurple;
                margin: .5px;
              `);

              /* just refresh */
              doodle.update();
            </textarea>
          </p>
        </section>
      </article>
    </section>

    <css-doodle grid="16" docs-bg>
      @size: .8em;
      background: hsla(calc(360 / 60 * @index()), 80%, 80%, .4);
      clip-path: polygon( 50% 0, 100% 100%, 0 100%);
      transform:
        rotate(@rand(360deg))
        scale(@rand(.6, 1, .1))
        translate(
          @rand(-10em, 10em),
          @rand(-10em, 10em)
        )
    </css-doodle>

  </div>

  <footer>
    <css-doodle class="footer-bg">
      :doodle {
        @grid: 1 / 100%;
        position: absolute;
        transform: scale(2);
        background: @m200(
          linear-gradient(
            @p(to top, to bottom),
            @p(#FFE7B8, #FEF6F0, #D0EEDA),
            @p(@lp(), rgba(255, 255, 255, 0))
          )
          @r(0, 100%) @r(0, 100%) / @r(2px) @r(50px)
          no-repeat
        );
      }
    </css-doodle>
    <div class="about wrap">
      <p>
        Handcrafted with
        <css-doodle>
          :doodle {
            vertical-align: middle;
            display: inline-block;
            @size: .8em;
            background: rgba(255, 87, 34, 0.6);
            @shape: heart;
          }
        </css-doodle>
        by <a href="https://yuanchuan.dev">yuanchuan</a>. <br />
        MIT Licensed.
      </p>
    </div>
  </footer>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.38.0/codemirror.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.38.0/mode/css/css.min.js"></script>
  <script src="main.js?63e59eec068bc1648d51224aa2eb4033"></script>
  <!-- google analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-119113443-1"></script>
  <script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'UA-119113443-1');</script>
</body>
</html>
