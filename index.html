<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>&lt;css-doodle /&gt;</title>
  <meta name="keywords" content="css, web components">
  <meta name="description" content="A web component for drawing patterns with css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="lib/codemirror/style.css">
  <link rel="stylesheet" href="style.css?21e7d75f882d95bf8ea4122a3852a9e8">
  <script>(window.customElements && document.head.attachShadow) || (document.querySelector('html').className += ' oldie')</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/css-doodle/0.2.3/css-doodle.min.js"></script>
</head>
<body>

  <div class="cover">
    <css-doodle grid="1x28" flags>
      clip-path: polygon(
        0 0, 100% 0, 50% 1%
      );
      background-color: hsla(
        calc(3.5 * @index() + 180), 80%, 70%,
        @rand(.8)
      );
      animation: ani 1s cubic-bezier(.175, .885, 0.32, 1.275);
      animation-delay: @rand(.1s, 1.5s);
      animation-fill-mode: forwards;
      @keyframes ani {
        to {
          clip-path: polygon(
            0 0,
            100% 0,
            @rand(20%, 80%, .1) @rand(20%, 100%, .1)
          );
        }
      }
    </css-doodle>

    <header>
      <h1>&lt; <em>css-doodle</em> /&gt; </h1>
      <p>A web component for drawing patterns with CSS</p>
      <nav>
        <a href="#usage">Usage</a>
        <a href="https://codepen.io/collection/XyVkpQ/">Codepen</a>
        <a href="https://github.com/css-doodle/css-doodle">Github</a>
      </nav>
    </header>
    <div class="wrap">
      <div class="playground">
        <div class="doodle" front><!-- insert dynamicly --></div>
        <div class="source"><!--insert dynamicly --></div>
        </div>
      </div>
    </div>
  </div>

  <div class="docs">

    <!-- intro -->
    <section class="intro wrap">
      <h2><a name="intro"></a>Introduction</h2>
      <p>
        <em>&lt;css-doodle /&gt; </em> is based on
        <a href="http://w3c.github.io/webcomponents/spec/shadow/">Shadow DOM v1</a> and
        <a href="https://html.spec.whatwg.org/multipage/scripting.html#custom-elements">Custom Elements v1</a>.
        You can use it on latest <em>Chrome</em> and <em>Safari</em> right now without polyfills.
      </p>
      <p>
        The component will generate a grid of divs by the rules (plain CSS) inside it.
        You can easily manipulate those cells using CSS to come up with a graphic pattern or an animated graph.
        The limit is the limit of CSS itself.
      </p>
    </section>

    <!-- getting started -->
    <section class="gettting-started wrap">
      <h2><a name="getting-started"></a>Getting Started</h2>
      <p>
        Include the script directly from <a href="https://cdnjs.com/libraries/css-doodle">cdnjs</a> and everything is ready:
      </p>
      <p class="first-code-sample">
        <textarea code>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/css-doodle/0.2.3/css-doodle.min.js"></script>

          <css-doodle>
            /* put your code here */
          </css-doodle>
        </textarea>
      </p>
      <p>You can also install it from <a href="http://npmjs.org/package/css-doodle">npm</a> and import the module in javascript:
      <p>
        <textarea code>
          npm install css-doodle
        </textarea>
      </p>
    </section>

    <!-- usage -->
    <section class="usage">
      <div class="wrap">
        <h2><a name="usage"></a>Usage</h2>
        <p>
          The syntax of <em>&lt;css-doodle /&gt;</em> is based on CSS and provided several extra utility
          functions and shorthand properties.
        </p>

        <ul class="nav">
          <li> <a href="#grid">Grid</a></li>
          <li>
            <a href="#selectors">Selectors</a>
            <ul>
              <li> <a href="#selector-:doodle">:doodle</a></li>
              <li> <a href="#selector-@even">@even</a></li>
              <li> <a href="#selector-@odd">@odd</a></li>
              <li> <a href="#selector-@nth">@nth</a></li>
              <li> <a href="#selector-@at">@at</a></li>
              <li> <a href="#selector-@random">@random</a></li>
              <li> <a href="#selector-@row">@row</a></li>
              <li> <a href="#selector-@col">@col</a></li>
            </ul>
          </li>
          <li>
            <a href="#properties">Properties</a>
            <ul>
              <li> <a href="#property-@grid">@grid</a></li>
              <li> <a href="#property-@size">@size</a></li>
              <li> <a href="#property-@size">@min-size</a></li>
              <li> <a href="#property-@size">@max-size</a></li>
              <li> <a href="#property-@place-cell">@place-cell</a></li>
              <li> <a href="#property-@shape">@shape</a></li>
            </ul>
          </li>
          <li>
            <a href="#functions">Functions</a>
            <ul>
              <li> <a href="#function-@index">@index</a></li>
              <li> <a href="#function-@row">@row</a></li>
              <li> <a href="#function-@max-row">@max-row</a></li>
              <li> <a href="#function-@col">@col</a></li>
              <li> <a href="#function-@max-col">@max-col</a></li>
              <li> <a href="#function-@size">@size</a></li>
              <li> <a href="#function-@pick">@pick</a></li>
              <li> <a href="#function-@rand">@rand</a></li>
              <li> <a href="#function-@repeat">@repeat</a></li>
              <li> <a href="#function-@Math">@&lt;Math&gt;</a></li>
              <li> <a href="#function-@calc">@calc</a></li>
              <li> <a href="#function-@hex">@hex</a></li>
            </ul>
          </li>
          <li>
            <a href="#js-api">JS API</a>
            <ul>
              <li> <a href="#js-api-grid">grid</a></li>
              <li> <a href="#js-api-update">update</a></li>
            </ul>
          </li>
        </ul>
      </div>

      <!-- example -->
      <section class="example">
        <div class="container">
          <css-doodle>
            :doodle {
              @grid: 11 / 100vmax;
              background: #0a0c27;
            }
            --n: calc(
                @abs(@abs(@row() - 6)
              + @abs(@col() - 6) - 11) / 11
            );
            margin: -10%;
            transform: rotate(45deg);
            border: 1px solid hsla(
              calc(var(--n) * 280 + 120), 60%, 68%,
              var(--n)
            );
          </css-doodle>
        </div>
        <textarea code></textarea>
      </section>

      <article class="wrap">
        <h3><a name="grid"></a>Grid</h3>

        <p>
          The number of rows and columns in the grid is defined by the <em>"grid"</em> attribute on the element,
          ranged from <em>1</em> to <em>32</em>. It's default to be <em>1x1</em> when no value or 0 is given,
        </p>

        <p class="has-preview">
          <textarea code>
            <css-doodle grid="5">
              background: #60569e;
              margin: .5px;
            </css-doodle>
          </textarea>
          <css-doodle grid="5">
            :doodle {
              @size: 7em;
            }
            background: #60569e;
            margin: .5px;
          </css-doodle>
        </p>

        <p>
           The following formats of <em>"grid"</em> value are recognizable:
        </p>
        <div class="list-items">
          <ul>
            <li><code>grid = "0"</code></li>
            <li><code>grid = "5"</code></li>
            <li><code>grid = "20"</code></li>
            <li><code>grid = "5x7"</code></li>
            <li><code>grid = "5 x 7"</code></li>
            <li><code>grid = "5ï¼Œ7"</code></li>
            <li><code>grid = "5,7"</code></li>
          </ul>
        </div>
        <div class="sep"></div>
      </article>

      <article class="wrap">
        <h3><a name="selectors"></a>Selectors</h3>

        <section>
          <h4><a name="selector-:doodle"></a>:doodle</h4>
          <p>
            The <code>:doodle</code>
            is a special selector indicates to the component element itself.
            Note that the styles would be over-written by your normal css files outside.
            <span class="tip">(try to hover on the doodle)</span>
          </p>
          <p class="has-preview">
            <textarea code>
              :doodle { --s: 0 }
              :doodle(:hover) { --s: 1 }

              --offset: calc(var(--s) * 100%);
              transform: translateY(var(--offset));

              transition:
                .5s cubic-bezier(.175, .885, .32, 1.275)
                @rand(500ms);
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @grid: 5 / 7em;
                --s: 0;
              }
              :doodle(:hover) {
                --s: 1;
              }
              --offset: calc(var(--s) * 100%);
              transform: translateY(var(--offset));
              will-change: transform;
              transition: .5s cubic-bezier(.175, .885, .32, 1.275) @rand(500ms);

              transform-origin: 50% 50%;
              background: #60569e;
              margin: .5px;
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="selector-@even"></a>@even</h4>
          <p> Select cells like <code> :nth-child(even)</code> but shorter.</p>
          <p class="has-preview">
            <textarea code>
              @even {
                background: #60569e;
              }
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @size: 7em;
              }
              @even {
                background: #60569e;
                :after {
                  content: '@index()';
                  font-size: .7em;
                  color: #fff;
                }
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="selector-@odd"></a>@odd</h4>
          <p> Select cells like <code> :nth-child(odd)</code>.</p>
          <p class="has-preview">
            <textarea code>
              @odd {
                background: #60569e;
              }
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @size: 7em;
              }
              @odd {
                background: #60569e;
                :after {
                  content: '@index()';
                  font-size: .7em;
                  color: #fff;
                }
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="selector-@nth"></a>@nth(n)</h4>
          <p> Select the nth cell like <code> :nth-child(n)</code>.</p>
          <p class="has-preview">
            <textarea code>
              @nth(9) {
                background: #60569e;
              }
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @size: 7em;
              }
              background: #f5f5f5;
              margin: .5px;
              @nth(9) {
                background: #60569e;
                :after {
                  content: '@index()';
                  font-size: .7em;
                  color: #fff;
                }
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="selector-@at"></a>@at(x, y)</h4>
          <p> Select by coordinate.</p>
          <p class="has-preview">
            <textarea code>
              @at(4, 2) {
                background: #60569e;
              }
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @size: 7em;
              }
              background: #f5f5f5;
              margin: .5px;
              @at(4, 2) {
                background: #60569e;
                :after {
                  content: '@row(), @col()';
                  font-size: .5em;
                  color: #fff;
                }
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="selector-@random"></a>@random</h4>
          <p>Select cells randomly.</p>
          <p class="has-preview">
            <textarea code>
              @random {
                background: #60569e;
              }
            </textarea>
            <css-doodle grid="5" class="click-to-update">
              :doodle {
                @size: 7em;
              }
              background: #f5f5f5;
              transition: .2s;
              @random {
                background: #60569e;
                :after {
                  content: '@index()';
                  font-size: .7em;
                  color: #fff;
                }
              }
              margin: .5px;
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="selector-@row"></a>@row(n)</h4>
          <p> Select the nth row of the grid.</p>
          <p class="has-preview">
            <textarea code>
              @row(3) {
                background: #60569e;
              }
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @size: 7em;
              }
              background: #f5f5f5;
              margin: .5px;
              @row(3) {
                background: #60569e;
                :after {
                  content: '@row()';
                  font-size: .7em;
                  color: #fff;
                }
              }
            </css-doodle>
          </p>
          <p>
            The <code>odd</code> and <code>even</code> is supported.
          </p>
          <p class="has-preview">
            <textarea code>
              @row(even) {
                background: #60569e;
              }
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @size: 7em;
              }
              background: #f5f5f5;
              margin: .5px;
              @row(even) {
                background: #60569e;
                :after {
                  content: '@row()';
                  font-size: .7em;
                  color: #fff;
                }
              }
              @row(even) {
                :after {
                  content: '@row()';
                  font-size: .7em;
                  color: #fff;
                }
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="selector-@col"></a>@col(n)</h4>
          <p> Select the nth column of the grid.</p>
          <p class="has-preview">
            <textarea code>
              @col(3) {
                background: #60569e;
              }
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @size: 7em;
              }
              background: #f5f5f5;
              margin: .5px;
              @col(3) {
                background: #60569e;
                :after {
                  content: '@col()';
                  font-size: .7em;
                  color: #fff;
                }
              }
            </css-doodle>
          </p>
          <p>
            You can use <code>odd</code> and <code>even</code> too.
          </p>
          <p class="has-preview">
            <textarea code>
              @col(odd) {
                background: #60569e;
              }
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @size: 7em;
              }
              background: #f5f5f5;
              margin: .5px;
              @col(odd) {
                background: #60569e;
                :after {
                  content: '@col()';
                  font-size: .7em;
                  color: #fff;
                }
              }
            </css-doodle>
          </p>
        </section>
        <div class="sep"></div>
      </article>

      <article class="wrap">
        <h3><a name="properties"></a>Properties</h3>

        <section>
          <h4><a name="property-@grid"></a>@grid</h4>
          <p>Another way to set the <em>"grid"</em> attribute and the rule has higher priority.</p>
          <p class="has-preview">
            <textarea code>
              <css-doodle>
                :doodle {
                  @grid: 3x3;
                }
              </css-doodle>
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @grid: 3 / 7em;
              }
              background: #60569e;
              margin: .5px;
            </css-doodle>
          </p>

          <p>Set grid and doodle size at the same time: </p>
          <p class="has-preview">
            <textarea code>
              <css-doodle>
                :doodle {
                  @grid: 8 / 7em;
                }
              </css-doodle>
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @grid: 8 / 7em;
              }
              background: #60569e;
              margin: .5px;
            </css-doodle>
          </p>

          <p>The row or column is limitted up to <em>1024</em> only when the grid is 1-dimensional: </p>
          <p class="has-preview">
            <textarea code>
              <css-doodle>
                :doodle {
                  @grid: 30x1 / 7em 12em;
                }
                background: #60569e;
                width: @rand(5%, 100%);
                margin: .5px 0;
              </css-doodle>
            </textarea>
            <css-doodle grid="5" class="click-to-update">
              :doodle {
                @grid: 30x1 / 7em 12em;
              }
              transition: .2s ease;
              transition-delay: @rand(500ms);
              background: #60569e;
              will-change: width;
              width: @rand(5%, 100%);
              margin: .5px 0;
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="property-@size"></a>@size, @min-size, @max-size</h4>
          <p>Set width and height in one place.</p>
          <p class="has-preview">
            <textarea code>
              @size: 10em;
              /* width: 10em; height: 10em; */

              @size: 4em 5em;
              /* width: 4em; height: 5em; */

              @min-size: 7em;
              /* min-width: 7em; min-height: 7em; */

              @max-size: 7em;
              /* max-width: 7em; max-height: 7em; */
            </textarea>
            <css-doodle>
              :doodle {
                @grid: 1 / 7em;
              }
              @size: 10em;
              @size: 4em 5em;
              @min-size: 7em;
              @max-size: 7em;
              background: #60569e;
              :after {
                content: '7em x 7em';
                color: #fff;
                font-size: .7em;
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="property-@place-cell"></a>@place-cell</h4>
          <p>Place cells relative to the grid. </p>
          <p class="has-preview">
            <textarea code>
              @size: 1.6em;
              @nth(1) { @place-cell: 0; }
              @nth(2) { @place-cell: 100% 25%; }
              @nth(3) { @place-cell: center; }
              @nth(4) { @place-cell: .8em calc(100% - .8em); }
              @nth(5) { @place-cell: 75% 80%; }
            </textarea>

            <css-doodle>
              :doodle {
                @grid: 1x5 / 7em;
                border: 1px solid #60569e;
              }
              @size: 1.6em;
              background: rgba(72, 74, 142, .8);
              @nth(1) { @place-cell: 0; }
              @nth(2) { @place-cell: 100% 25%; }
              @nth(3) { @place-cell: center; }
              @nth(4) { @place-cell: .8em calc(100% - .8em); }
              @nth(5) { @place-cell: 75% 80%; }
              :after {
                content: '@index()';
                color: #fff;
                font-size: .7em;
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="property-@shape"></a>@shape</h4>
          <p>Return a css shape generated with <code>clip-path</code> and <code>polygon()</code>.</p>
          <p class="has-preview">
            <textarea code>
              :doodle {
                @grid: 7 / 7em;
                @shape: circle;
              }
              @even {
                @shape: hypocycloid 4;
                background: #60569e;
                transform: scale(2) rotate(-60deg);
              }
            </textarea>
            <css-doodle>
              :doodle {
                @grid: 7 / 7em;
                @shape: circle;
              }
              @even {
                @shape: hypocycloid 4;
                background: #60569e;
                transform: scale(2) rotate(-60deg);
              }
            </css-doodle>
          </p>
          <div class="basic-shapes">
            <h5><a name="basic-shape"></a>Basic shapes</h5>
            <div class="shapes">
              <!-- shapes -->
            </div>
          </div>
        </section>
      </article>

      <section class="example">
        <div class="container">
          <css-doodle>
            :doodle {
              @grid: 7 / 100vmax;
              background: #0a0c27;
            }

            @shape: clover 5;
            background: hsla(
              calc(360 - @index() * 4),
              70%, 68%, @rand(.8)
            );
            transform:
              scale(@rand(.2, 1.5))
              translate(
                @rand(-50%, 50%), @rand(-50%, 50%)
              );
          </css-doodle>
        </div>
        <textarea code></textarea>
      </section>

      <article class="wrap">
        <h3><a name="functions"></a>Functions</h3>
        <section>
          <h4><a name="function-@index"></a>@index</h4>
          <p> Returns the current index value of the cell.</p>
          <p class="has-preview">
            <textarea code>
              :after {
                content: '@index()';
              }
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @size: 7em;
              }
              background: #60569e;
              margin: .5px;
              :after {
                content: '@index()';
                color: #fff;
                font-size: .7em;
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="function-@row"></a>@row</h4>
          <p> Returns the current row number of the cell.</p>
          <p class="has-preview">
            <textarea code>
              :after {
                content: '@row()';
              }
            </textarea>
            <css-doodle grid="5">
              :doodle {
                @size: 7em;
              }
              background: #60569e;
              margin: .5px;
              :after {
                content: '@row()';
                color: #fff;
                font-size: .7em;
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="function-@max-row"></a>@max-row</h4>
          <p> Returns the max row number of the grid.</p>
          <p class="has-preview">
            <textarea code>
              :doodle {
                @grid: 4x2 / 7em 9em;
              }
              :after {
                content: '@row() / @max-row()';
              }
            </textarea>
            <css-doodle>
              :doodle {
                @grid: 4x2 / 7em 9em;
              }
              background: #60569e;
              margin: .5px;
              :after {
                content: '@row() / @max-row()';
                color: #fff;
                font-size: .7em;
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="function-@col"></a>@col</h4>
          <p> Returns the current column number of the cell.</p>
          <p class="has-preview">
            <textarea code>
              :after {
                content: '@col()';
              }
            </textarea>
            <css-doodle grid="5">
              :doodle { @size: 7em; }
              background: #60569e;
              margin: .5px;
              :after {
                content: '@col()';
                color: #fff;
                font-size: .7em;
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="function-@max-col"></a>@max-col</h4>
          <p> Returns the max column number of the grid.</p>
          <p class="has-preview">
            <textarea code>
              :doodle {
                @grid: 2x4 / 7em 9em;
              }
              :after {
                content: '@col()/@max-col()';
              }
            </textarea>
            <css-doodle>
              :doodle {
                @grid: 2x4 / 7em 9em;
              }
              background: #60569e;
              margin: .5px;
              :after {
                content: '@col()/@max-col()';
                color: #fff;
                font-size: .7em;
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="function-@size"></a>@size</h4>
          <p> Returns the total cells number of the grid.</p>
          <p class="has-preview">
            <textarea code>
              :doodle {
                @grid: 3 / 7em;
              }
              :after {
                content: '@index() / @size()';
              }
            </textarea>
            <css-doodle>
              :doodle {
                @grid: 3 / 7em;
              }
              background: #60569e;
              margin: .5px;
              :after {
                content: '@index() / @size()';
                color: #fff;
                font-size: .7em;
              }
            </css-doodle>
          </p>
          <p>
            These numbers can be used to generate dynamic values together with <code>calc()</code>.
          </p>
          <p class="has-preview">
            <textarea code>
              background: rgba(
                96, 86, 158,
                calc(@row() * @col() / @size())
              );
            </textarea>
            <css-doodle grid="5">
              :doodle { @size: 7em; }
              --alpha: calc(@row() * @col() / @size());
              background: rgba(96, 86, 158, var(--alpha));
              :after {
                content: '@calc(@row() * @col())';
                color: #fff;
                font-size: .7em;
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="function-@pick"></a>@pick(v1, v2,...)</h4>
          <p>
            Randomly pick a value from the given list.
            <br/><span class="tip">(try to click on the doodle)</span>
          </p>
          <p class="has-preview">
            <textarea code>
              :after {
                content: '@pick(+, *, -, #)';
                color: @pick(#60569e, #2196f3);
              }
            </textarea>
            <css-doodle grid="5" class="click-to-update">
              :doodle { @size: 7em; }
              :after {
                content: '@pick(+, *, -, #)';
                color: @pick(#60569e, #2196f3);
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="function-@rand"></a>@rand(start [,stop] [,step])</h4>
          <p>
            Returns a random value from the range of numbers.
            <br/><span class="tip">(try to click the doodle)</span>
          </p>
          <p class="has-preview">
            <textarea code>
              background: rgba(96, 86, 158, @rand(.9));
              transition: .2s ease @rand(200ms);
              transform: rotate(@rand(360deg));
              clip-path: polygon(
                @rand(100%) 0, 100% @rand(100%), 0 @rand(100%)
              );
            </textarea>
            <css-doodle grid="5" class="click-to-update">
              :doodle { @size: 7em; }
              background: rgba(96, 86, 158, @rand(.9));
              transition: .2s ease @rand(200ms);
              will-change: transform;
              transform: rotate(@rand(360deg));
              clip-path: polygon(
                @rand(100%) 0, 100% @rand(100%), 0 @rand(100%)
              );
            </css-doodle>
          </p>
          <p>It also recognizes the letter range: </p>
          <p class="has-preview">
            <textarea code>
              :after {
                content: '@rand(a, z)';
              }
            </textarea>
            <css-doodle grid="5" class="click-to-update">
              :doodle { @size: 7em; }
              background: #60569e;
              margin: .5px;
              :after {
                font-size: .7em;
                content: '@rand(a, z)';
                color: #fff;
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="function-@repeat"></a>@repeat(times, value)</h4>
          <p>
            Duplicate the given value:
            <br/><span class="tip">(try to click the doodle)</span>
          </p>
          <p class="has-preview">
            <textarea code>
              /* little circles */
              background: #@repeat(6,
                @pick(@rand(0, 9), @rand(a, f))
              );
            </textarea>
            <css-doodle grid="5" class="click-to-update">
              :doodle { @size: 7em; }
              background: #60569e;
              margin: .5px;
              :after {
                content: '';
                position: absolute;
                left: @rand(20%, 80%);
                top: @rand(20%, 80%);
                @size: 5px;
                border-radius: 50%;
                background: #@repeat(6, @pick(@rand(0, 9), @rand(a, f)));
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="function-@Math"></a>@&lt;Math&gt;</h4>
          <p>
            All Math functions and constants are available prefixed with <code>'@'</code>.
          </p>
          <p class="has-preview">
            <textarea code>
              --num: calc(@abs(
                  @abs(@row() - 3)
                + @abs(@col() - 3) - 5) / 5
              );

              background: rgba(
                96, 86, 158, calc(var(--num) / 5)
              );
            </textarea>
            <css-doodle grid="5">
              :doodle { @size: 7em; }
              --num: @abs(@abs(@row() - 3) + @abs(@col() - 3) - 5);
              background: rgba(
                96, 86, 158, calc(var(--num) / 5)
              );
              will-change: transform;
              transform: rotate(15deg) scale(calc(var(--num) / 5));
            </css-doodle>
          </p>

          <p class="has-preview">
            <textarea code>
              :doodle { @grid: 60x1 / 7em 15em; }
              @size: 75.8% 1px;
              justify-self: center;

              background: rgba(
                96, 86, 158, calc(1 - @index() / @size())
              );

              transform:
                rotate(15deg)
                translateX(
                  calc(@sin(@index() / 4) * @PI() * 10px)
                );
            </textarea>
            <css-doodle>
              :doodle {
                @grid: 60x1 / 7em 15em;
              }
              @size: 75.8% 1px;
              justify-self: center;
              background: rgba(
                96, 86, 158, calc(1 - @index() / 60)
              );
              will-change: transform;
              transform:
                rotate(-15deg)
                translateX(
                  calc(@sin(@index() / 4) * @PI() * 10px)
                );
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="function-@calc"></a>@calc(expr)</h4>
          <p>
            Evaluate calculations.
          </p>
          <p class="has-preview">
            <textarea code>
              :after {
                content: '@calc(@index() * @index())';
              }
            </textarea>
            <css-doodle>
              :doodle {
                @grid: 5 / 7em;
              }
              background: #60569e;
              :after {
                content: '@calc(@index() * @index())';
                color: #fff;
                font-size: .5em;
              }
              @odd {
                transform: scale(.75);
              }
            </css-doodle>
          </p>
        </section>

        <section>
          <h4><a name="function-@hex"></a>@hex(num)</h4>
          <p>
            Transform a number to the hex format.
          </p>
          <p class="has-preview">
            <textarea code>
              :after {
                content: '\@hex(@rand(9632, 9687))';
              }
            </textarea>
            <css-doodle grid="5" class="click-to-update">
              :doodle { @size: 7em; }
              margin: .5px;
              :after {
                content: '\@hex(@rand(9632, 9687))';
                color: #60569e;
              }
            </css-doodle>
          </p>
        </section>
      </article>

      <section class="example">
        <div class="container">
          <css-doodle>
            :doodle {
              @grid: 20 / 100vmax;
              background: #12152f;
              font-family: sans-serif;
            }
            :after {
              content: '\@hex(@rand(0x2500, 0x257f))';
              font-size: 5vmax;
              color: hsla(
                @rand(360), 70%, 70%,
                @rand(.9)
              );
            }
          </css-doodle>
        </div>
        <textarea code></textarea>
      </section>

      <article class="wrap">
        <h3><a name="js-api"></a>JS API </h3>
        <section>
          <h4><a name="js-api-grid"></a>grid</h4>
          <p>Getter/setter for the grid attribute on the element. </p>
          <p>
            <textarea code>
              const doodle = document.querySelector('css-doodle');

              /* Note that the grid value inside the :doodle selector has higher
                 priority than the attribute value on the element. So this setter
                 operation may not have an affect on the final grid value. */
              doodle.grid = "5";

              console.log(doodle.grid);
              /* { x: 5, y: 5, size: 25 } */
            </textarea>
          </p>
        </section>
        <section>
          <h4><a name="js-api-update"></a>update([styles])</h4>
          <p>Re-render the component (with given styles).</p>
          <p>
            <textarea code>
              const doodle = document.querySelector('css-doodle');

              /* update styles and refresh */
              doodle.update(`
                :doodle { @grid: 6 / 7em }
                background: rebeccapurple;
                margin: .5px;
              `);

              /* just refresh */
              doodle.update();
            </textarea>
          </p>
        </section>
      </article>
    </section>

    <css-doodle grid="16" docs-bg>
      @size: .8em;
      background: hsla(calc(360 / 60 * @index()), 80%, 80%, .4);
      clip-path: polygon( 50% 0, 100% 100%, 0 100%);
      transform:
        rotate(@rand(360deg))
        scale(@rand(.6, 1, .1))
        translate(
          @rand(-10em, 10em),
          @rand(-10em, 10em)
        )
    </css-doodle>

  </div>

  <footer>
    <css-doodle class="footer-bg">
      :doodle {
        @grid: 6 / 100%;
      }
      @size: .8em;
      background: hsla(calc(10 * @index()), 60%, 60%, .2);
      clip-path: polygon( 50% 0, 100% 100%, 0 100%);
      transform:
        rotate(@rand(360deg))
        scale(@rand(.6, 1, .1))
        translate(
          @rand(-10em, 10em),
          @rand(-10em, 10em)
        )
    </css-doodle>
    <div class="about wrap">
      <p>
        Made with
        <css-doodle>
          :doodle {
            vertical-align: middle;
            display: inline-block;
            @size: .8em;
            background: rgba(255, 87, 34, 0.6);
            clip-path: @shape(heart);
          }
        </css-doodle>
        by <a href="https://yuanchuan.name">yuanchuan</a>. <br />
        MIT Licensed.
      </p>
    </div>
  </footer>

  <script src="lib/codemirror/core.js"></script>
  <script src="lib/codemirror/lang/css.js"></script>
  <script src="main.js?00cabeb332548d649d07cb9e3d56654f"></script>
  <!-- google analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-119113443-1"></script>
  <script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'UA-119113443-1');</script>
</body>
</html>
